dnl Process this file with autoconf to produce a configure script.
AC_INIT(include/SOAP.h)
AM_INIT_AUTOMAKE(EasySoap++, 0.3.1)

dnl Checks for programs.
AC_PROG_RANLIB
AM_PROG_LIBTOOL
AC_PROG_CC
AC_PROG_CXX
AC_PROG_CPP
AC_PROG_MAKE_SET
AC_PATH_PROG(MAKEDEPEND, makedepend, $TRUE)

dnl Checks for libraries.
AC_CHECK_LIB(expat, XML_Parse)
AC_CHECK_LIB(ssl, SSL_connect)
AC_CHECK_LIB(crypto, des_crypt)
AC_CHECK_LIB(nsl, SSL_connect)
AC_CHECK_LIB(wsock32, WSAStartup)

dnl Checks for header files.
AC_HEADER_STDC

dnl Checks for typedefs, structures, and compiler characteristics.
AC_C_CONST
AC_TYPE_SIZE_T

dnl Checks for library functions.

dnl Standard macros.
STATIC_EASYSOAP_LIBS="\$(top_builddir)/src/libeasysoap.a"
DYNAMIC_EASYSOAP_LIBS="-L \$(top_builddir)/src -leasysoap"
EASYSOAP_INCLUDES="-I \$(top_srcdir)/include"
AC_SUBST(STATIC_EASYSOAP_LIBS)
AC_SUBST(DYNAMIC_EASYSOAP_LIBS)
AC_SUBST(EASYSOAP_INCLUDES)

# REV: Need to autodetect & create macros for the location of Expat
# stuff.
EXPAT_LIBS="-lexpat"
EXPAT_INCLUDES=""
AC_SUBST(EXPAT_LIBS)
AC_SUBST(EXPAT_INCLUDES)

AC_OUTPUT(Makefile simpleserver/Makefile validator/Makefile tests/Makefile src/Makefile src/abyss/Makefile src/abyss/src/Makefile include/Makefile)
